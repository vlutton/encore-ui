<a href="https://github.com/rackerlabs/encore-ui/edit/master/src/rxMisc/rxMisc.js" class="improve-docs"><i class="icon-edit"> </i>Improve this doc</a><a href="https://github.com/rackerlabs/encore-ui/blob/7aeb6b7/src/rxMisc/rxMisc.js#L289" class="view-source"><i class="icon-eye-open"> </i>View source</a><h1><code ng:non-bindable="">rxAutoSave</code>
<div><span class="hint">service in module <code ng:non-bindable="">rxMisc</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="rxmisc-service-page rxmisc-service-rxautosave-page"><p>A factory that controllers can use to help automatically save and load
form data (via LocalStorage) on any given page.</p>
</div></div>
<h2 id="usage">Usage</h2>
<div class="usage"><pre class="prettyprint linenums">rxAutoSave(scope, variable[, options]);</pre>
<h4 id="usage_parameters">Parameters</h4><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>scope</td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="rxmisc-service-page rxmisc-service-rxautosave-page"><p>scope to apply a <code>$watch</code> expression</p>
</div></td></tr><tr><td>variable</td><td><a href="" class="label type-hint type-hint-string">String</a></td><td><div class="rxmisc-service-page rxmisc-service-rxautosave-page"><p>variable name corresponding to an object on the given scope</p>
</div></td></tr><tr><td>options <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="rxmisc-service-page rxmisc-service-rxautosave-page"><p>usage options</p>
</div><table><thead><tr><th>Property</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>clearOnSuccess</td><td><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="rxmisc-service-page rxmisc-service-rxautosave-page"><p><em>optional</em> -
Clear saved data on successful resolution of given promise.</p>
</div> <p><em>(default: null)</em></p></td></tr><tr><td>ttl</td><td><a href="" class="label type-hint type-hint-integer">Integer</a></td><td><div class="rxmisc-service-page rxmisc-service-rxautosave-page"><p><em>optional</em> -
Time to Live (in seconds) - defaults to 2 days</p>
<p>Whenever data changes in the watched variable, the expiry time will be freshly set
In addition, we freshly set the expiry time whenever the data is loaded. If the data
is 12 hours away from expiring and a user visits the page again, the expiry will be
freshly set to a new 48 hours, whether or not the user makes a change.</p>
<p>If a user visits a page after the data has expired, the data will be cleared from
storage and not automatically loaded.</p>
<ul>
<li>A continuous background process is not running to look for expired data.</li>
<li>We only check for expiration the next time <code>rxAutoSave</code> tries to load the data.</li>
</ul>
<p>To turn off automatic expiry for a given form, pass a value of <code>{ ttl: 0 }</code>.
In this case, the data will never expire and you will have to clear it manually at
an appropriate time by using one of the following:</p>
<ul>
<li><code>clear()</code></li>
<li><code>clearOnSuccess()</code></li>
</ul>
</div> <p><em>(default: 172800)</em></p></td></tr><tr><td>load</td><td><a href="" class="label type-hint type-hint-boolean">Boolean</a><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="rxmisc-service-page rxmisc-service-rxautosave-page"><p><em>optional</em> -
If false, will prevent data from being automatically loaded onto the scope.</p>
<p>You may use a promise that resolves to a boolean, if desired.</p>
</div> <p><em>(default: true)</em></p></td></tr><tr><td>save</td><td><a href="" class="label type-hint type-hint-boolean">Boolean</a><a href="" class="label type-hint type-hint-promise">Promise</a></td><td><div class="rxmisc-service-page rxmisc-service-rxautosave-page"><p><em>optional</em> -
If false, will prevent data from being automatically saved on change.</p>
<p>You may use a promise that resolves to a boolean, if desired.</p>
</div> <p><em>(default: true)</em></p></td></tr><tr><td>storageBackend</td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="rxmisc-service-page rxmisc-service-rxautosave-page"><p><em>optional</em> -
Must be an object which has <code>getObject(key)</code> and <code>setObject(key, val)</code> methods.
<code>LocalStorage</code> and <code>SessionStorage</code> are both provided by EncoreUI, and support
this interface.</p>
<p>You can use your own custom backends as well, as long as it supports <code>getObject(key)</code>
and <code>setObject(key, val)</code>.</p>
</div> <p><em>(default: LocalStorage)</em></p></td></tr></tbody></table></td></tr></tbody></table></div>
</div>
